sudo apt update && sudo apt upgrade -y && \
sudo apt install -y git wget curl python3 python3-pip python3-venv python3-dev \
build-essential ccache gawk make gcc g++ \
libncurses5-dev libncursesw5-dev \
libtool automake autoconf \
pkg-config \
libffi-dev libssl-dev \
libxml2-dev libxslt1-dev \
libjpeg-dev zlib1g-dev && \
python3 -m pip install --upgrade pip && \
cd ~ && \
git clone https://github.com/ArduPilot/ardupilot.git && \
cd ardupilot && \
git submodule update --init --recursive && \
Tools/environment_install/install-prereqs-ubuntu.sh -y && \
. ~/.profile
 

then after this run this command 

cd ~/ardupilot
./waf configure



cd ~/ardupilot
./waf copter



cd ~/ardupilot/ArduCopter
sim_vehicle.py



if any error is there


step 1 :-  python3 -m pip install --upgrade pip --break-system-packages
step 2 :- cd ~/ardupilot
Tools/environment_install/install-prereqs-ubuntu.sh -y
. ~/.profile
step 3 :- cd ~/ardupilot
./waf configure
step 4 :- ./waf copter
cd ArduCopter
sim_vehicle.py



